"use strict";(self.webpackChunktemp=self.webpackChunktemp||[]).push([[24],{577:(Se,k,l)=>{l.r(k),l.d(k,{SuperAdminModule:()=>Te});var d=l(6895),x=l(8136),e=l(4650),Z=l(8423);let j=(()=>{class s{constructor(){}ngOnInit(){}}return s.\u0275fac=function(t){return new(t||s)},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-super-admin"]],decls:5,vars:1,consts:[[1,"w-100"],["bdColor","rgba(0, 0, 0, 0.8)","size","medium","color","#fff","type","ball-clip-rotate",3,"fullScreen"],[2,"color","white"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"router-outlet"),e.TgZ(2,"ngx-spinner",1)(3,"p",2),e._uU(4," Loading... "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("fullScreen",!0))},dependencies:[x.lC,Z.Ro]}),s})();var S=l(2340),Q=l(7579),L=l(8372),K=l(1884),B=l(5546),$=l(5226),A=l.n($),H=l(3741),D=l(574),T=l(7092),u=l(433),U=l(2013),F=l(4889),E=l(946),M=l(2542),z=l(6196),q=l(8784),I=l(355);function G(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"div",23)(1,"img",24),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.uploadExcel())}),e.qZA(),e._UZ(2,"img",25),e.qZA()}}function W(s,o){if(1&s&&(e.TgZ(0,"th",26),e._uU(1),e.qZA()),2&s){const t=o.$implicit;e.xp6(1),e.hij(" ",t," ")}}function X(s,o){if(1&s&&(e.TgZ(0,"td",28)(1,"span",29),e._uU(2),e.qZA()()),2&s){const t=o.$implicit,n=e.oxw().index,i=e.oxw();e.xp6(2),e.Oqu(null==i.list?null:i.list.data[n][t])}}function V(s,o){if(1&s&&(e.TgZ(0,"tr"),e.YNc(1,X,3,1,"td",27),e.qZA()),2&s){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("ngForOf",n.getObjectKeys(t))}}let ee=(()=>{class s{constructor(t,n,i,a,r,c,p,m,C){this.activeModal=t,this.fb=n,this.notificationService=i,this._errorService=a,this._configService=r,this._authService=c,this._spinnerService=p,this._companyService=m,this._contestService=C,this.statusList=[],this.isRequest=!1,this.requiredColumns=["AGENT_CODE","EMP_NAME","RANK","FINAL_QUALIFICATION","CONTEST_TEXT"],this.currentPage=1,this.perPage=S.N?.perPage}ngOnInit(){}get f(){return this.form.controls}onFileChange(t){t.target.files.length&&(this.companyLogo=t.target.files[0])}submit(){if(this.isRequest=!0,this.excelForContest){this._spinnerService.show();let t=new FormData;t.append("Contest_ID",this.item.Contest_ID),t.append("columnDataTypes",JSON.stringify(this.columnDataTypes)),this.excelForContest&&t.append("ContestAttachment",this.excelForContest),t.append("isOnlyExcel","1"),this._contestService.updateContestData(t).subscribe({next:n=>{this._spinnerService.hide(),this.isRequest=!1,this.notificationService.showSuccess(n.message),this.activeModal.close(!0)},error:n=>{this._spinnerService.hide(),this.isRequest=!1,this.notificationService.showDisposableAlert(n.error.message)}})}}addContestData(){this.isRequest=!0,this._spinnerService.show();let t=new FormData;t.append("Contest_ID",this.item.Contest_ID),t.append("Name",this.item?.Name),t.append("Status",this.item.Status),t.append("From_Date",this.item?.From_Date),t.append("To_Date",this.item?.To_Date),t.append("Result_Date",this.item?.Result_Date),t.append("Discription",this.item?.Discription),t.append("Type",this.item.Type),t.append("Criteria",JSON.stringify(this.uniqueCriteria)),t.append("ContestData",JSON.stringify(this.jsonData)),t.append("columnDataTypes",JSON.stringify(this.columnDataTypes)),t.append("Imagefile",this.item.Image),t.append("Path",this.item.Path),this.contestData&&t.append("ContestAttachment",this.contestData),this._contestService.updateContestData(t).subscribe({next:n=>{this._spinnerService.hide(),this.isRequest=!1,this.notificationService.showSuccess(n.message),this.configureFlag=!0,this.activeflag=!1},error:n=>{this._spinnerService.hide(),this.isRequest=!1,this.notificationService.showDisposableAlert(n.error.message)}})}importContestExcel(t){t.target.files.length>0&&(this.excelForContest=t.target.files[0]);const n=t.target;if(this._spinnerService.show(),t.target.files.length>0&&(this.contestData=t.target.files[0]),1!==n.files.length)return void this.notificationService.showError("Select only single file.");this._spinnerService.show();const i=new FileReader;i.onload=a=>{const c=D.ij(a.target.result,{type:"binary"}),p=c.SheetNames[0],C=c.Sheets[p];let g=D.P6.sheet_to_json(c.Sheets[p],{header:1}),P=D.P6.sheet_to_json(C,{raw:!0,defval:""});this.jsonData=this.processDates(P);const b=new Map,v=[];if(this.jsonData.forEach(h=>{"object"==typeof h&&Object.keys(h).forEach(J=>{const w=h[J];if("string"==typeof w&&w.endsWith("%")){const Y=parseFloat(w.replace("%",""));if(!isNaN(Y)){const be=Math.round(Y)+"%";h[J]=be}}});const y=h.AGENT_CODE;b.has(y)?v.push(h):b.set(y,!0)}),v.length>0){const h=v.map(y=>JSON.stringify(y.AGENT_CODE)).join("\n");return this.notificationService.showError(`Duplicate AGENT_CODE found:\n${h}`),this._spinnerService.hide(),!1}this.headersOfExcel=this.jsonData[0],this.data=g,this.rowHeader=g[0],this.transformedDataColumn=this.rowHeader.map(h=>h.includes("KPI")?{label:h.replace("_NAME",""),value:h.replace("_NAME","")}:{label:h,value:h}),this.transformedData=Array.from({length:30},(h,y)=>({label:`KPI${y+1}`,value:`KPI${y+1}`})),this.analyzeDataTypes(g),this.tempArr=[],this.uniqueCriteria=[],this.uniqueCriteriaHeading=[],this.tempArr.shift(),this.list=this.getPaginatedData(this.currentPage,this.perPage,this.jsonData.length,this.jsonData);const R=this.requiredColumns.filter(h=>!g[0].includes(h));return R.length>0?(this.notificationService.showError(`Missing required columns: ${R.join(", ")}`),this._spinnerService.hide(),!1):(this._spinnerService.hide(),!0)},this._spinnerService.hide(),i.readAsBinaryString(n.files[0])}validateExcelColumns(t){for(let i in t)if(1==new RegExp("^(\\w)(1){1}$").test(i)){var n=Object.keys(t).indexOf(i);if(!(1==n&&"Sr.No"==t[i].v||2==n&&"EmployeeCode"==t[i].v||3==n&&"Name"==t[i].v||4==n&&"Role"==t[i].v||5==n&&"Email"==t[i].v||6==n&&"Phone No"==t[i].v))return this.notificationService.showError("Excel should have only 6 columns (Sr.No,EmployeeCode,Name,Role,Email,Phone No)"),!1}return!0}getPaginatedData(t,n,i,a){const r=(t-1)*n,c=Math.min(r+n,i),p=Math.ceil(i/n);return{currentPage:t,data:a.slice(r,c),message:"Feed details found.",success:!0,total:i,totalPages:p}}analyzeDataTypes(t){this.columnDataTypes={};const n=t[0];return console.log("DATATTAt Headers======",t,n),n.forEach(i=>{const a=t.map(c=>c[i]);let r="string";a.every(c=>Number.isInteger(c))?r="integer":a.every(p=>!isNaN(Date.parse(p)))&&(r="date"),this.columnDataTypes[i]=r}),this.columnDataTypes}validateExcelRows(t){return this.data=t.slice(1),this.finalData=[],!0}getObjectKeys(t){return t?Object.keys(t):[]}pager(t){this.currentPage=t,this.list=this.getPaginatedData(this.currentPage,this.perPage,this.jsonData.length,this.jsonData)}changePerPage(t){this.currentPage=1,this.perPage=t,this.list=this.getPaginatedData(this.currentPage,this.perPage,this.jsonData.length,this.jsonData)}uploadExcel(){}processDates(t){let n=[];return t.forEach(i=>{const a={};for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=r.includes("LAST_MODIFIED_TIME")?this.convertSerialToDate(i[r]):i[r].toString());n.push(a)}),n}convertToPercentage(t){if(t){const n=100*parseFloat(t);return isNaN(n)?"":n.toFixed(2)+"%"}return""}convertSerialToDate(t){return t?new Date(86400*(t-25569)*1e3).toLocaleString():""}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(T.Kz),e.Y36(u.qu),e.Y36(U.g),e.Y36(F.T),e.Y36(E.E),e.Y36(M.e),e.Y36(Z.t2),e.Y36(z.J),e.Y36(q.c))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-upload-excel-data"]],inputs:{item:"item"},decls:32,vars:7,consts:[["novalidate","novalidate",1,"form","w-100"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["aria-hidden","true","aria-label","Close",1,"close","cursor-pointer",3,"click"],[1,"material-icons","text-lg","position-relative"],[1,"modal-body"],[1,"container","pb-2"],[1,"row","pb-2"],[1,"col-lg-6","col-12","mt-3"],[1,"span-font"],["type","file","multiple","false","id","fileInput",2,"display","none",3,"change"],["for","fileInput"],["src","./assets/images/group3.png",1,"cursor-pointer","hover","mr-l",2,"width","50%"],["class","col-lg-6 pt-5 col-12 my-auto text-end d-inline-flex justify-content-end align-items-center",4,"ngIf"],[1,"table-responsive"],[1,"table","table-bordered","align-items-center","mb-0"],["class","text-uppercase text-secondary text-xs font-weight-bolder ps-3 pe-2",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[1,"px-1","mt-3"],[3,"currentPage","perPage","total","lastPage","loadPage","changePerPage"],[1,"modal-footer"],["type","submit",1,"btn","btn-gradient-dark",3,"click"],["type","submit",1,"btn","btn-gradient-light",3,"click"],[1,"col-lg-6","pt-5","col-12","my-auto","text-end","d-inline-flex","justify-content-end","align-items-center"],["src","./assets/images/edit.png","ngbTooltip","edit",1,"cursor-pointer","mr-l",2,"width","17px",3,"click"],["src","./assets/images/group5   .png","ngbTooltip","history",1,"cursor-pointer","mr-l",2,"width","18%"],[1,"text-uppercase","text-secondary","text-xs","font-weight-bolder","ps-3","pe-2"],["class","ps-3",4,"ngFor","ngForOf"],[1,"ps-3"],[1,"text-sm","text-dark","font-weight-bolder","opacity-7"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"div",1)(2,"h5",2),e._uU(3,"Upload Excel"),e.qZA(),e.TgZ(4,"span",3),e.NdJ("click",function(){return n.activeModal.close(!1)}),e.TgZ(5,"i",4),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"span",9),e._uU(12,"Configure"),e.qZA(),e._UZ(13,"br"),e.TgZ(14,"input",10),e.NdJ("change",function(a){return n.importContestExcel(a)}),e.qZA(),e.TgZ(15,"label",11),e._UZ(16,"img",12),e.qZA()(),e.YNc(17,G,3,0,"div",13),e.qZA(),e.TgZ(18,"div",14)(19,"table",15)(20,"thead")(21,"tr"),e.YNc(22,W,2,1,"th",16),e.qZA()(),e.TgZ(23,"tbody"),e.YNc(24,V,2,1,"tr",17),e.qZA()()(),e.TgZ(25,"nav",18)(26,"app-paginator",19),e.NdJ("loadPage",function(a){return n.pager(a)})("changePerPage",function(a){return n.changePerPage(a)}),e.qZA()()()(),e.TgZ(27,"div",20)(28,"button",21),e.NdJ("click",function(){return n.submit()}),e._uU(29," Submit "),e.qZA(),e.TgZ(30,"button",22),e.NdJ("click",function(){return n.activeModal.close(!1)}),e._uU(31," Cancel "),e.qZA()()()),2&t&&(e.xp6(17),e.Q6J("ngIf",!1),e.xp6(5),e.Q6J("ngForOf",n.getObjectKeys(n.headersOfExcel)),e.xp6(2),e.Q6J("ngForOf",null==n.list?null:n.list.data),e.xp6(2),e.Q6J("currentPage",n.currentPage)("perPage",n.perPage)("total",null==n.list?null:n.list.total)("lastPage",null==n.list?null:n.list.totalPages))},dependencies:[d.sg,d.O5,T._L,u._Y,u.JL,u.F,I.Z],styles:[".label-data1[_ngcontent-%COMP%]{font-size:14px;color:#080707;font-weight:500}.label-view1[_ngcontent-%COMP%]{font-size:13px;color:gray}.table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #d6dee7;padding:2px;font-size:13px}"]}),s})();var O=l(5439);function te(s,o){1&s&&(e.TgZ(0,"div",18),e._uU(1," This is required "),e.qZA())}function ne(s,o){1&s&&(e.TgZ(0,"div",18),e._uU(1," This is required "),e.qZA())}function ie(s,o){1&s&&(e.TgZ(0,"div",18),e._uU(1," This is required "),e.qZA())}const N=function(s,o){return{"border-danger is-invalid":s,"is-valid":o}};let se=(()=>{class s{constructor(t,n,i,a,r,c,p,m){this.activeModal=t,this.fb=n,this.notificationService=i,this._errorService=a,this._configService=r,this._authService=c,this._spinnerService=p,this._contestService=m,this.statusList=[],this.isRequest=!1}ngOnInit(){this.initForm(),console.log("item--------",this.item)}get f(){return this.form.controls}initForm(){this.form=this.fb.group({fromdate:[(0,d.p6)(new Date(this.item.From_Date),"yyyy-MM-dd","en-US"),[u.kI.required]],todate:[(0,d.p6)(new Date(this.item.To_Date),"yyyy-MM-dd","en-US"),[u.kI.required]],resultdate:[(0,d.p6)(new Date(this.item.Result_Date),"yyyy-MM-dd","en-US"),[u.kI.required]]})}submit(){this.form.valid?(this.isRequest=!0,this._spinnerService.show(),this._contestService.updateContestDates({Contest_ID:this.item.Contest_ID,From_Date:this.form.value?.fromdate,To_Date:this.form.value?.todate,Result_Date:this.form.value?.resultdate}).subscribe({next:n=>{this._spinnerService.hide(),this.isRequest=!1,this.notificationService.showSuccess(n.message),this.activeModal.close(!0)},error:n=>{this._spinnerService.hide(),this.isRequest=!1,this.notificationService.showDisposableAlert(n.error.message)}})):(this.form.markAllAsTouched(),this._errorService.scrollToError())}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(T.Kz),e.Y36(u.qu),e.Y36(U.g),e.Y36(F.T),e.Y36(E.E),e.Y36(M.e),e.Y36(Z.t2),e.Y36(q.c))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-edit-contest-dates"]],inputs:{item:"item"},decls:32,vars:18,consts:[["novalidate","novalidate",1,"form","w-100",3,"formGroup","ngSubmit"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["aria-hidden","true","aria-label","Close",1,"close","cursor-pointer",3,"click"],[1,"material-icons","text-lg","position-relative"],[1,"modal-body"],[1,"row"],[1,"col-lg-3","col-md-12"],[1,"input-outline","my-1"],[1,"label-view"],["type","date","formControlName","fromdate","placeholder","Duration Form",1,"form-control",3,"ngClass"],["class","req-field",4,"ngIf"],["type","date","formControlName","todate","placeholder","Duration To",1,"form-control",3,"min","ngClass"],[1,"col-lg-4","col-md-12"],["type","date","formControlName","resultdate","placeholder","Result Announcement Date",1,"form-control",3,"min","ngClass"],[1,"modal-footer"],["type","submit",1,"btn","btn-gradient-light","px-2",3,"click"],["type","submit",1,"btn","btn-gradient-dark","px-2"],[1,"req-field"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return n.submit()}),e.TgZ(1,"div",1)(2,"h5",2),e._uU(3,"Add Criteria"),e.qZA(),e.TgZ(4,"span",3),e.NdJ("click",function(){return n.activeModal.close(!1)}),e.TgZ(5,"i",4),e._uU(6,"close"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"label",9),e._uU(12,"Duration Form"),e.qZA(),e._UZ(13,"input",10),e.qZA(),e.YNc(14,te,2,0,"div",11),e.qZA(),e.TgZ(15,"div",7)(16,"div",8)(17,"label",9),e._uU(18,"To"),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.YNc(20,ne,2,0,"div",11),e.qZA(),e.TgZ(21,"div",13)(22,"div",8)(23,"label",9),e._uU(24,"Result Announcement Date"),e.qZA(),e._UZ(25,"input",14),e.qZA(),e.YNc(26,ie,2,0,"div",11),e.qZA()()(),e.TgZ(27,"div",15)(28,"button",16),e.NdJ("click",function(){return n.activeModal.close(!1)}),e._uU(29," Cancel "),e.qZA(),e.TgZ(30,"button",17),e._uU(31,"Submit"),e.qZA()()()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(13),e.Q6J("ngClass",e.WLB(9,N,n.form.controls.fromdate.invalid&&(n.form.controls.fromdate.dirty||n.form.controls.fromdate.touched),n.form.controls.fromdate.valid)),e.xp6(1),e.Q6J("ngIf",n.form.controls.fromdate.invalid&&(n.form.controls.fromdate.dirty||n.form.controls.fromdate.touched)),e.xp6(5),e.Q6J("min",n.form.controls.fromdate.value)("ngClass",e.WLB(12,N,n.form.controls.todate.invalid&&(n.form.controls.todate.dirty||n.form.controls.todate.touched),n.form.controls.todate.valid)),e.xp6(1),e.Q6J("ngIf",n.form.controls.todate.invalid&&(n.form.controls.todate.dirty||n.form.controls.todate.touched)),e.xp6(5),e.Q6J("min",n.form.controls.todate.value)("ngClass",e.WLB(15,N,n.form.controls.resultdate.invalid&&(n.form.controls.resultdate.dirty||n.form.controls.resultdate.touched),n.form.controls.resultdate.valid)),e.xp6(1),e.Q6J("ngIf",n.form.controls.resultdate.invalid&&(n.form.controls.resultdate.dirty||n.form.controls.resultdate.touched)))},dependencies:[d.mk,d.O5,u._Y,u.Fj,u.JJ,u.JL,u.sg,u.u],styles:[".label-data1[_ngcontent-%COMP%]{font-size:14px;color:#080707;font-weight:500}.label-view1[_ngcontent-%COMP%]{font-size:13px;color:gray}"]}),s})();var ae=l(529);let oe=(()=>{class s{constructor(t){this.http=t}getDashboardKPICount(t){return this.http.post(`${S.N.URL}/transaction/RCM/get-count-status`,t)}getDashboardFrequencyCount(t){return this.http.post(`${S.N.URL}/transaction/RCM/get-count-frequency`,t)}getDashboardList(t){return this.http.post(`${S.N.URL}/transaction/RCM/get-list`,t)}}return s.\u0275fac=function(t){return new(t||s)(e.LFG(ae.eN))},s.\u0275prov=e.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();var re=l(3071),le=l(4271);function ce(s,o){1&s&&(e.TgZ(0,"tr")(1,"td",21),e._uU(2," No User available "),e.qZA()()),2&s&&(e.xp6(1),e.uIk("colspan",8))}function de(s,o){1&s&&(e.TgZ(0,"span",35),e._uU(1,"Draft"),e.qZA())}function pe(s,o){1&s&&(e.TgZ(0,"span",36),e._uU(1,"Upcomming"),e.qZA())}function ue(s,o){1&s&&(e.TgZ(0,"span",37),e._uU(1,"In Progress"),e.qZA())}function he(s,o){1&s&&(e.TgZ(0,"span",38),e._uU(1,"Closed"),e.qZA())}function me(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"img",39),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw();return e.KtG(a.uploadExcel(i))}),e.qZA()}}function ge(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"img",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editUser(i))}),e.qZA()}}function fe(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"img",40),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw();return e.KtG(a.editContestDates(i))}),e.qZA()}}const _e=function(){return{link_color:"Y"}};function Ce(s,o){if(1&s){const t=e.EpF();e.TgZ(0,"tr")(1,"td",22)(2,"span",23),e._uU(3),e.qZA()(),e.TgZ(4,"td")(5,"a",24),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.redirect(a))}),e._uU(6),e.qZA()(),e.TgZ(7,"td"),e._uU(8),e.ALo(9,"date"),e.ALo(10,"date"),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.ALo(13,"date"),e.qZA(),e.TgZ(14,"td"),e._uU(15),e.qZA(),e.TgZ(16,"td"),e._uU(17),e.qZA(),e.TgZ(18,"td",25),e.YNc(19,de,2,0,"span",26),e.YNc(20,pe,2,0,"span",27),e.YNc(21,ue,2,0,"span",28),e.YNc(22,he,2,0,"span",29),e.qZA(),e.TgZ(23,"td",30)(24,"div"),e.YNc(25,me,1,0,"img",31),e.TgZ(26,"img",32),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.viewHistory(a))}),e.qZA(),e.YNc(27,ge,1,0,"img",33),e.YNc(28,fe,1,0,"img",33),e.TgZ(29,"img",34),e.NdJ("click",function(){const a=e.CHM(t).$implicit,r=e.oxw();return e.KtG(r.deleteContest(a))}),e.qZA()()()()}if(2&s){const t=o.$implicit,n=o.index,i=e.oxw();e.xp6(3),e.Oqu(n+1),e.xp6(2),e.Q6J("ngClass",e.DdM(24,_e)),e.xp6(1),e.Oqu(t.Name),e.xp6(2),e.AsE(" ",e.xi3(9,15,t.From_Date,"dd-MMM-yyyy")," To ",e.xi3(10,18,t.To_Date,"dd-MMM-yyyy")," "),e.xp6(4),e.hij(" ",e.xi3(13,21,t.Result_Date,"dd-MMM-yyyy")," "),e.xp6(3),e.hij(" ",t.finalQualificationCount," "),e.xp6(2),e.hij(" ",t.claimedCount," "),e.xp6(2),e.Q6J("ngIf",!t.Status),e.xp6(1),e.Q6J("ngIf",t.Status&&3==i.isDateCheckCurrent(t)),e.xp6(1),e.Q6J("ngIf",t.Status&&1==i.isDateCheckCurrent(t)),e.xp6(1),e.Q6J("ngIf",t.Status&&2==i.isDateCheckCurrent(t)),e.xp6(3),e.Q6J("ngIf",i.isContestClaimedByUser(t)),e.xp6(2),e.Q6J("ngIf",2!=i.isDateCheckCurrent(t)),e.xp6(1),e.Q6J("ngIf",2==i.isDateCheckCurrent(t)&&i.isContestClaimedByUser(t))}}const ve=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"",component:j},{path:"dashboard",component:(()=>{class s{constructor(t,n,i,a,r,c,p,m,C,g,P,b){this.document=t,this._authService=n,this._configService=i,this._spinnerService=a,this._dashboardService=r,this.modalService=c,this.router=p,this.location=m,this._userService=C,this._contestService=g,this.message=P,this.notificationService=b,this.list={},this.currentPage=1,this.perPage=S.N?.perPage,this.searchTerm="",this.searchTermChanged=new Q.x,this.userType=[],this.userTypeForAdmin=[],this.userTypeForSuperAdmin=[],this.dropdownData=[],this.isRequest=!1,this.kpiList=[],this.currentDate=new Date}ngOnInit(){this.message.requestPermission(),this.selectedKpi=this.kpiList[0],this.getData()}isDateGreaterThanCurrent(t){return(0,d.p6)(new Date(t),"yyyy-MM-dd","en-US")<(0,d.p6)(new Date,"yyyy-MM-dd","en-US")}isDateCheckCurrent(t){return!t.Status||(0,d.p6)(new Date,"yyyy-MM-dd","en-US")>=(0,d.p6)(new Date(t.From_Date),"yyyy-MM-dd","en-US")&&(0,d.p6)(new Date,"yyyy-MM-dd","en-US")<=(0,d.p6)(new Date(t.To_Date),"yyyy-MM-dd","en-US")?1:(0,d.p6)(new Date,"yyyy-MM-dd","en-US")>=(0,d.p6)(new Date(t.To_Date),"yyyy-MM-dd","en-US")?2:(0,d.p6)(new Date,"yyyy-MM-dd","en-US")<(0,d.p6)(new Date(t.From_Date),"yyyy-MM-dd","en-US")?3:void 0}onKeyUp(t){0===this.searchTermChanged.observers.length&&this.searchTermChanged.pipe((0,L.b)(600),(0,K.x)()).subscribe(n=>{this.getData()}),this.searchTermChanged.next(t)}getData(){console.log(this.filterForm),this._spinnerService.show(),this._contestService.getAllContest({search:this.searchTerm,pageNumber:this.currentPage,numberOfRows:this.perPage}).subscribe({next:n=>{this._spinnerService.hide(),this.currentPage=n?.currentPage,this.list=n},error:n=>{this._spinnerService.hide()}})}goBack(){this.location.back()}editUser(t){this.router.navigate(["/home/masters/edit-content-details/"+t.Contest_ID])}deleteContest(t){A().fire({title:"Are you sure?",text:"You want to delete this record.",icon:"warning",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&this.deleteContestDetials(t)})}deleteContestDetials(t){this._spinnerService.show(),this.isRequest=!0,this._contestService.deleteContestDeatils({Contest_ID:t?.Contest_ID}).subscribe({next:i=>{this._spinnerService.hide(),this.isRequest=!1,A().fire({title:"Deleted!",text:"Record has been deleted.",icon:"success"}),this.getData()},error:i=>{this._spinnerService.hide(),this.isRequest=!1}})}addUser(){this.router.navigate(["/home/masters/add-content-details"])}viewHistory(t){const n=this.modalService.open(H.u,{backdropClass:"modal-backdrop",backdrop:"static",size:"lg",keyboard:!1});console.log("item.trn_contest_user_attachments======",t.trn_contest_user_attachments),n.componentInstance.item=t,n.result.then(i=>{i&&(this.currentPage=1,this.getData())})}uploadExcel(t){const n=this.modalService.open(ee,{backdropClass:"modal-backdrop",backdrop:"static",size:"xl",keyboard:!1});n.componentInstance.item=t,n.result.then(i=>{i&&(this.currentPage=1,this.getData())})}changePassword(t){const n=this.modalService.open(B.p,{backdropClass:"modal-backdrop",backdrop:"static",keyboard:!1});n.componentInstance.user=t,n.result.then(i=>{})}deleteUserConfirmation(t){A().fire({title:"Are you sure?",text:"You want to delete this record.",icon:"warning",showCancelButton:!0,cancelButtonColor:"#d33",confirmButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&this.deleteUser(t)})}deleteUser(t){this._spinnerService.show(),this.isRequest=!0;let n={Id:t?.Id,Current_Logged_In_Role:this._authService.getAuthFromLocalStorage()?.currentRole};this._userService.deleteUserData(n).subscribe({next:i=>{this._spinnerService.hide(),this.isRequest=!1,A().fire({title:"Deleted!",text:"Record has been deleted.",icon:"success"}),this.getData()},error:i=>{this._spinnerService.hide(),this.isRequest=!1}})}pager(t){this.currentPage=t,this.getData()}changePerPage(t){this.currentPage=1,this.perPage=t,this.getData()}redirect(t){this.router.navigate(["/home/masters/reward-dashboard/"+t.Contest_ID])}importContestExcel(t){const n=t.target;if(t.target.files.length>0&&(this.contestData=t.target.files[0]),1!==n.files.length)return void this.notificationService.showError("Select only single file.");const i=new FileReader;i.onload=a=>{const c=D.ij(a.target.result,{type:"binary"}),p=c.SheetNames[0],C=c.Sheets[p];let g=D.P6.sheet_to_json(c.Sheets[p],{header:1});this.jsonData=D.P6.sheet_to_json(C,{raw:!0}),console.log("JSONDATA=============",this.jsonData),this.headersOfExcel=this.jsonData[0],this.data=g,this.rowHeader=g[0];let b=this.analyzeDataTypes(g);console.log("columnDataTypes =====",b),this.tempArr=[],this.uniqueCriteria=[],this.uniqueCriteriaHeading=[],this.jsonData.forEach(f=>{if(this.tempArr.push(f),!this.uniqueCriteria.find(_=>_.Criteria==f.Criteria&&_["points to qualify"]==f["points to qualify"])){let _={};_.Criteria=f.Criteria,_["points to qualify"]=f["points to qualify"],_["no of winners"]=0,this.uniqueCriteria.push(_)}}),this.uniqueCriteriaHeading=this.uniqueCriteria[0],this.uniqueCriteriaHeading[2]="No. of Winner",this.tempArr.shift(),this.uniqueCriteria.shift(),this.list=this.getPaginatedData(this.currentPage,this.perPage,this.jsonData.length,this.jsonData),console.log("KD=====list=",this.list);const v=this.requiredColumns.filter(f=>!g[0].includes(f));return!(v.length>0&&(console.error(`Missing required columns: ${v.join(", ")}`),this.notificationService.showError(`Missing required columns: ${v.join(", ")}`),1))},i.readAsBinaryString(n.files[0])}validateExcelColumns(t){for(let i in t)if(1==new RegExp("^(\\w)(1){1}$").test(i)){var n=Object.keys(t).indexOf(i);if(!(1==n&&"Sr.No"==t[i].v||2==n&&"EmployeeCode"==t[i].v||3==n&&"Name"==t[i].v||4==n&&"Role"==t[i].v||5==n&&"Email"==t[i].v||6==n&&"Phone No"==t[i].v))return this.notificationService.showError("Excel should have only 6 columns (Sr.No,EmployeeCode,Name,Role,Email,Phone No)"),!1}return!0}getPaginatedData(t,n,i,a){const r=(t-1)*n,c=Math.min(r+n,i),p=Math.ceil(i/n);return{currentPage:t,data:a.slice(r,c),message:"Feed details found.",success:!0,total:i,totalPages:p}}validateExcelRows(t){return this.data=t.slice(1),this.finalData=[],!0}analyzeDataTypes(t){this.columnDataTypes={};const n=t[0];return console.log("DATATTAt Headers======",t,n),n.forEach(i=>{const a=t.map(c=>c[i]);let r="string";a.every(c=>Number.isInteger(c))?r="integer":a.every(p=>!isNaN(Date.parse(p)))&&(r="date"),this.columnDataTypes[i]=r}),this.columnDataTypes}isContestClaimedByUser(t){if(t){const n=O(t.Result_Date).startOf("day"),i=O().startOf("day");return n.isAfter(i)}return!1}editContestDates(t){console.log("item---------",t);const n=this.modalService.open(se,{backdropClass:"modal-backdrop",backdrop:"static",size:"lg",keyboard:!1});n.componentInstance.item=t,n.result.then(i=>{i&&this.getData()})}}return s.\u0275fac=function(t){return new(t||s)(e.Y36(d.K0),e.Y36(M.e),e.Y36(E.E),e.Y36(Z.t2),e.Y36(oe),e.Y36(T.FF),e.Y36(x.F0),e.Y36(d.Ye),e.Y36(re.K),e.Y36(q.c),e.Y36(le.e),e.Y36(U.g))},s.\u0275cmp=e.Xpm({type:s,selectors:[["app-sa-dashboard"]],decls:44,vars:7,consts:[[1,"row"],[1,"col-12"],[1,"col-lg-12","col-md-12","mb-md-0","mb-4"],[1,"card-header"],[1,"col-lg-6","col-12","modal-dialog-centered"],[1,"material-symbols-outlined","go-back","mr-l",3,"click"],[1,"col-lg-6","col-12","my-auto","d-inline-flex","justify-content-end","align-items-center"],[1,"input-outline-search","me-2"],["type","text","name","search","placeholder","Search..",1,"input-search",3,"ngModel","ngModelChange","keyup"],["type","button",1,"btn","btn-gradient-dark","p-1","px-4","mb-0",3,"click"],[1,"material-icons","opacity-10"],[1,"card-body","px-0","py-2"],[1,"table-responsive"],[1,"table","table-bordered","align-items-center","mb-0"],[1,"text-uppercase","text-secondary","text-xs","font-weight-bolder","ps-3","pe-2",2,"width","75px"],[1,"text-uppercase","text-secondary","text-xs","font-weight-bolder","ps-2"],[2,"width","24%"],[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"px-1","mt-3"],[3,"currentPage","perPage","total","lastPage","loadPage","changePerPage"],[1,"text-center"],[1,"ps-3"],[1,"text-sm","text-dark","font-weight-bolder","opacity-7"],[1,"cursor-pointer",3,"ngClass","click"],[1,"align-middle"],["class","text-dark",4,"ngIf"],["class","text-blue",4,"ngIf"],["class","text-primary",4,"ngIf"],["class","text-success",4,"ngIf"],[2,"text-align","end"],["src","./assets/images/upload-excel.png","class","mr-l cursor-pointer","style","width: 47%","ngbTooltip","upload excel",3,"click",4,"ngIf"],["src","./assets/images/history.png","ngbTooltip","history",1,"mr-l","cursor-pointer",2,"width","33%",3,"click"],["src","./assets/images/edit.png","class","mr-l cursor-pointer","style","width: 06%","ngbTooltip","edit",3,"click",4,"ngIf"],["src","./assets/images/delete.png","ngbTooltip","delete",1,"cursor-pointer",2,"width","06%",3,"click"],[1,"text-dark"],[1,"text-blue"],[1,"text-primary"],[1,"text-success"],["src","./assets/images/upload-excel.png","ngbTooltip","upload excel",1,"mr-l","cursor-pointer",2,"width","47%",3,"click"],["src","./assets/images/edit.png","ngbTooltip","edit",1,"mr-l","cursor-pointer",2,"width","06%",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",0)(3,"div",2)(4,"div",3)(5,"div",0)(6,"div",4)(7,"h6",5),e.NdJ("click",function(){return n.goBack()}),e._uU(8," arrow_back "),e.qZA(),e.TgZ(9,"h6"),e._uU(10,"Contest"),e.qZA()(),e.TgZ(11,"div",6)(12,"div",7)(13,"input",8),e.NdJ("ngModelChange",function(a){return n.searchTerm=a})("keyup",function(a){return n.onKeyUp(a)}),e.qZA()(),e.TgZ(14,"button",9),e.NdJ("click",function(){return n.addUser()}),e.TgZ(15,"i",10),e._uU(16,"add"),e.qZA(),e._uU(17," Add Contest "),e.qZA()()()(),e.TgZ(18,"div",11)(19,"div",12)(20,"table",13)(21,"thead")(22,"tr")(23,"th",14),e._uU(24," Sr.\xa0No. "),e.qZA(),e.TgZ(25,"th",15),e._uU(26," Name "),e.qZA(),e.TgZ(27,"th",15),e._uU(28," Contest Period "),e.qZA(),e.TgZ(29,"th",15),e._uU(30," Result On "),e.qZA(),e.TgZ(31,"th",15),e._uU(32," No of Qualified "),e.qZA(),e.TgZ(33,"th",15),e._uU(34," No of Claim "),e.qZA(),e.TgZ(35,"th",15),e._uU(36," Status "),e.qZA(),e.TgZ(37,"th",16),e._uU(38,"Action"),e.qZA()()(),e.TgZ(39,"tbody"),e.YNc(40,ce,3,1,"tr",17),e.YNc(41,Ce,30,25,"tr",18),e.qZA()()(),e.TgZ(42,"nav",19)(43,"app-paginator",20),e.NdJ("loadPage",function(a){return n.pager(a)})("changePerPage",function(a){return n.changePerPage(a)}),e.qZA()()()()()()()),2&t&&(e.xp6(13),e.Q6J("ngModel",n.searchTerm),e.xp6(27),e.Q6J("ngIf",(null==n.list?null:n.list.data)&&0==n.list.data.length),e.xp6(1),e.Q6J("ngForOf",null==n.list?null:n.list.data),e.xp6(2),e.Q6J("currentPage",n.currentPage)("perPage",n.perPage)("total",n.list.total)("lastPage",n.list.totalPages))},dependencies:[d.mk,d.sg,d.O5,u.Fj,u.JJ,u.On,I.Z,T._L,d.uU],styles:[".table-bordered[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table-bordered[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #d6dee7;padding:2px;font-size:13px}"]}),s})()}];let ye=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[x.Bz.forChild(ve),x.Bz]}),s})();var De=l(2271);let Te=(()=>{class s{}return s.\u0275fac=function(t){return new(t||s)},s.\u0275mod=e.oAB({type:s}),s.\u0275inj=e.cJS({imports:[d.ez,ye,De.m,T.HK]}),s})()}}]);
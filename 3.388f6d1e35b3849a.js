"use strict";(self.webpackChunktemp=self.webpackChunktemp||[]).push([[3],{4003:(Y,p,l)=>{l.r(p),l.d(p,{AuthModule:()=>N});var c=l(8136),s=l(433),g=l(2340),t=l(4650),h=l(2542),f=l(2013),v=l(6571),m=l(6895);function _(i,r){1&i&&(t.TgZ(0,"div",19),t._uU(1,"This is required"),t.qZA())}const x=function(i,r){return{"is-invalid":i,"is-valid":r}};let T=(()=>{class i{constructor(e,o,a,n,d){this.router=e,this.fb=o,this.authService=a,this.notificationService=n,this.loggingService=d,this.defaultAuth={email:"mayur.parve@autoflowtech.com"},g.N.production&&Object.keys(this.defaultAuth).forEach(u=>{this.defaultAuth[u]=""})}ngOnInit(){this.initForm()}get f(){return this.form.controls}initForm(){this.form=this.fb.group({email:[this.defaultAuth.email,[s.kI.required]]})}submit(){this.form.valid&&this.authService.forgotPassword(this.f.email.value).subscribe({next:e=>{this.notificationService.showDisposableAlert(e.message),this.router.navigate(["/auth"])},error:e=>{this.notificationService.showDisposableAlert(e.error.message),this.loggingService.logError("User details not found",e)}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.F0),t.Y36(s.qu),t.Y36(h.e),t.Y36(f.g),t.Y36(v.e))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-forgot-password"]],decls:23,vars:6,consts:[["novalidate","novalidate",1,"form","w-100",3,"formGroup","ngSubmit"],[1,"main-content","mt-0"],[1,"page-header","align-items-start","min-vh-100",2,"background-image","url('./assets/images/bg.jpg')"],[1,"mask","bg-gradient-dark","opacity-6"],[1,"container","my-auto"],[1,"row"],[1,"col-lg-4","col-md-8","col-12","mx-auto"],[1,"card","z-index-0","fadeIn3","fadeInBottom"],[1,"card-header","p-0","position-relative","mt-n4","mx-3","z-index-2"],[1,"bg-gradient-dark","shadow-dark","border-radius-lg","py-3","pe-1"],[1,"text-white","font-weight-bolder","text-center","mb-0"],[1,"card-body"],[1,"input-outline","my-3"],["type","email","placeholder","email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","bg-gradient-primary","w-100","my-2"],[1,"mt-4","text-sm","text-center"],["routerLink","/auth",1,"text-primary","text-gradient","font-weight-bold"],[1,"invalid-feedback"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"main",1)(2,"div",2),t._UZ(3,"span",3),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9)(10,"h4",10),t._uU(11,"Forgot Password"),t.qZA()()(),t.TgZ(12,"div",11)(13,"div",12),t._UZ(14,"input",13),t.YNc(15,_,2,0,"div",14),t.qZA(),t.TgZ(16,"div",15)(17,"button",16),t._uU(18,"Submit"),t.qZA()(),t.TgZ(19,"p",17),t._uU(20," Forgot Password? "),t.TgZ(21,"a",18),t._uU(22,"Click to Login"),t.qZA()()()()()()()()()()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(14),t.Q6J("ngClass",t.WLB(3,x,o.form.controls.email.invalid,o.form.controls.email.valid)),t.xp6(1),t.Q6J("ngIf",o.form.controls.email.hasError("required")&&(o.form.controls.email.dirty||o.form.controls.email.touched)))},dependencies:[m.mk,m.O5,c.yS,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u]}),i})();var w=l(2410),y=l(8423),Z=l(946);function S(i,r){1&i&&(t.TgZ(0,"div",29),t._uU(1," This is required "),t.qZA())}function C(i,r){1&i&&(t.TgZ(0,"div",29),t._uU(1," This is required "),t.qZA())}const b=function(i,r){return{"is-invalid":i,"is-valid":r}};function A(i,r){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"h6",16),t._uU(2,"USER ID"),t.qZA(),t.TgZ(3,"div",17),t._UZ(4,"img",18)(5,"input",19),t.YNc(6,S,2,0,"div",20),t.qZA(),t.TgZ(7,"label",16),t._uU(8,"PASSWORD"),t.qZA(),t.TgZ(9,"div",17),t._UZ(10,"img",21)(11,"input",22),t.YNc(12,C,2,0,"div",20),t.qZA(),t.TgZ(13,"div",17)(14,"div",23)(15,"input",24),t.NdJ("change",function(a){t.CHM(e);const n=t.oxw();return t.KtG(n.saveRememberMe(a))}),t.qZA(),t.TgZ(16,"label",25),t._uU(17," Remember Me "),t.qZA()()(),t.TgZ(18,"div",26)(19,"button",27),t._uU(20," Login "),t.qZA()(),t.TgZ(21,"span",28),t._uU(22),t.qZA(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(5),t.Q6J("ngClass",t.WLB(5,b,e.form.controls.email.invalid,e.form.controls.email.valid)),t.xp6(1),t.Q6J("ngIf",e.form.controls.email.hasError("required")&&(e.form.controls.email.dirty||e.form.controls.email.touched)),t.xp6(5),t.Q6J("ngClass",t.WLB(8,b,e.form.controls.password.invalid,e.form.controls.password.valid)),t.xp6(1),t.Q6J("ngIf",e.form.controls.password.hasError("required")&&(e.form.controls.password.dirty||e.form.controls.password.touched)),t.xp6(10),t.hij("Version - ",e.Version,"")}}function O(i,r){1&i&&(t.TgZ(0,"div",42),t._uU(1," OTP is required. "),t.qZA())}function P(i,r){if(1&i&&(t.TgZ(0,"p",43),t._uU(1),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.hij(" Resend OTP in ",e.countdown," seconds ")}}const L=function(i){return{disabled:i}},k=function(i){return{"fa-spin fa-spinner":i}};function U(i,r){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"p",30),t._uU(2," Enter OTP we sent to your mobile number. "),t.qZA(),t.TgZ(3,"div",31)(4,"div",32)(5,"span",33),t._UZ(6,"img",34),t.qZA(),t.TgZ(7,"input",35),t.NdJ("input",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.onOTPChange())}),t.qZA()()(),t.YNc(8,O,2,0,"div",36),t.YNc(9,P,2,1,"p",37),t.TgZ(10,"p",38),t._uU(11," Didn't you receive the OTP? "),t.TgZ(12,"span",39),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(!a.resendDisabled&&a.resendOTP())}),t._uU(13," Resend OTP "),t.qZA()(),t.TgZ(14,"div",26)(15,"button",40),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.verifyOTP())}),t._UZ(16,"i",41),t._uU(17," Verify OTP "),t.qZA()(),t.BQk()}if(2&i){const e=t.oxw();t.xp6(8),t.Q6J("ngIf",e.showOTPError),t.xp6(1),t.Q6J("ngIf",e.resendDisabled),t.xp6(3),t.Q6J("ngClass",t.VKq(5,L,e.resendDisabled)),t.xp6(3),t.Q6J("disabled",e.isLoading),t.xp6(1),t.Q6J("ngClass",t.VKq(7,k,e.isLoading))}}const J=[{path:"",component:(()=>{class i{constructor(e,o,a,n,d,u,M,q){this.router=e,this.fb=o,this.authService=a,this.notificationService=n,this.loggingService=d,this._cryptoService=u,this._spinnerService=M,this._configService=q,this.defaultAuth={email:"",password:""},this.countdown=60,this.isLogin=!1,this.selectedValue="2",this.options=[{value:"1",label:"Employee"},{value:"2",label:"Agent"},{value:"3",label:"Partner"},{value:"4",label:"Admin"}],this.Version=g.N.appVersion,g.N.production&&Object.keys(this.defaultAuth)?.forEach(F=>{this.defaultAuth[F]=""})}ngOnInit(){this.loginData=localStorage.getItem("loginData"),this.initForm()}get f(){return this.form.controls}initForm(){this.form=this.fb.group({email:[JSON.parse(this.loginData)?.email,[s.kI.required]],password:[JSON.parse(this.loginData)?.password,[s.kI.required]],otp:[null],logintype:[]}),console.log("Login ------",this._configService.get("cFxC4LirgXONQC3M9SHThQ=="))}submit(){if(this.form.valid){var e=this._cryptoService.encrypt(this.f.email.value),o=this._cryptoService.encrypt(this.f.password.value);this._spinnerService.show(),console.log("KDKDKDK=======>",this._configService.get("cFxC4LirgXONQC3M9SHThQ==")),this.authService.login(e,o).subscribe({next:n=>{switch(this.authService.setAuthFromLocalStorage(JSON.stringify(n)),n.role){case this._configService.ADMIN:this.router.navigate(["home/super-admin"]);break;case this._configService.USER:this.router.navigate(["/user"]);break;default:this.router.navigate(["home/masters"])}console.log("KDKDKDK=======>",n),this._spinnerService.hide()},error:n=>(console.log("error=======>",n),this._spinnerService.hide(),this.isLogin=!1,this.notificationService.showDisposableAlert("Unable to login"))})}}saveRememberMe(e){console.log("item=====",e),localStorage.setItem("loginData","{}"),e.target.checked&&localStorage.setItem("loginData",JSON.stringify({email:this.form.controls.email.value,password:this.form.controls.password.value}))}onOTPChange(){let{otp:e}=this.form.value;this.showOTPError=null==e||""==e}startResendTimer(){this.resendDisabled=!0;const e=setInterval(()=>{this.countdown--,0===this.countdown&&(clearInterval(e),this.resendDisabled=!1,this.countdown=60)},1e3)}resendOTP(){this.isResendOTP=!0,this.button="Sending OTP",this.authService.resendOTP({emp_code:this.f.email.value}).subscribe({next:o=>{this.isResendOTP=!1,this.button="Resend OTP",this.startResendTimer()},error:o=>{this.isResendOTP=!1,this.button="Resend OTP",this.startResendTimer(),this.notificationService.showError(o?.error?.message)},complete:()=>{}})}verifyOTP(){if(0==this.showOTPError&&this.form.valid){this.isLoading=!0;let{otp:o}=this.form.value;this.authService.verifyOTP({emp_code:this.f.email.value,otp:o}).subscribe({next:n=>{if(401==n.code)this.isLoading=!1,this.isLogin=!1,this.notificationService.showDisposableAlert(n?.message),this.form.reset();else{if(this.isLoading=!1,0==n?.success)return this.form.get("otp")?.setValue(null),this.showOTPError=!0,void this.notificationService.showDisposableAlert(n?.message);switch(this.authService.setAuthFromLocalStorage(JSON.stringify(n)),n.role){case this._configService.ADMIN:this.router.navigate(["home/super-admin"]);break;case this._configService.USER:this.router.navigate(["/user"]);break;default:this.router.navigate(["home/masters"])}}},error:n=>{this.isLoading=!1,this.isLogin=!1,this.notificationService.showDisposableAlert(n?.error?.message),this.loggingService.logError("Unable to login",n)}})}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.F0),t.Y36(s.qu),t.Y36(h.e),t.Y36(f.g),t.Y36(v.e),t.Y36(w.$),t.Y36(y.t2),t.Y36(Z.E))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-login"]],decls:22,vars:4,consts:[["novalidate","novalidate","autocomplete","off",1,"form","w-100",3,"formGroup","ngSubmit"],[1,"main-content","mt-0"],[1,"page-header","align-items-start","min-vh-100",2,"background-image","url('./assets/images/landing-page.svg')"],[1,"mask","bg-gradient-dark","opacity-6"],[1,"container"],[1,"row","align-items-center","my-5"],[1,"col-lg-4","col-md-8","col-12","mx-auto"],[1,"row","d-flex","justify-content-center"],["src","./assets/images/logo-1.svg","alt","main_logo",1,"navbar-brand-img","h-100","mb-4","w-40"],[1,"card","z-index-0","fadeIn3","fadeInBottom"],[1,"card-body"],[1,"text-h3","px-4","mb-0","text-center"],["src","./assets/images/Delta logo Final file-01.png","alt","main_logo",1,"navbar-brand-img","h-100",2,"width","60%"],[1,"hr-1"],[1,"text-h1","font-weight-bolder","text-center","mb-0"],[4,"ngIf"],[1,"form-label","text-h1"],[1,"input-outline","my-2"],["src","./assets/icons/user.png","width","17",1,"position-absolute","border-right","pr-2","icon-position",2,"margin","12px 10px","width","12px"],["type","email","placeholder","USER ID","formControlName","email",1,"form-control","login-form-input",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["src","./assets/icons/key.png","width","17",1,"position-absolute","border-right","pr-2","icon-position",2,"margin","12px 10px","width","12px"],["type","password","placeholder","Password","formControlName","password",1,"form-control","login-form-input",3,"ngClass"],[1,"form-check","mt-2","ps-0"],["type","checkbox","value","true","id","praacApproval",1,"form-check-input",3,"change"],["for","praacApproval",1,"form-check-label","text-h2"],[1,"text-center"],["type","submit",1,"btn","bg-btn-primary","w-100","my-2"],[2,"display","flex","justify-content","center","font-size","small"],[1,"invalid-feedback"],[1,"text-center","my-2","text-sm","fw-semibold","text-muted"],[1,"input-outline"],[1,"input-with-icon"],[1,"icon",2,"width","20px","height","20px"],["src","../assets/icons/password.svg","alt","Image",1,"contain","w-100","h-100","mb-2"],["type","number","autocomplete","off","placeholder","OTP","formControlName","otp",1,"form-control",3,"input"],["class","invalid-feedback d-block ps-2",4,"ngIf"],["class","text-center my-2 text-xs fw-normal mb-0 text-muted",4,"ngIf"],[1,"text-center","my-2","text-xs","fw-semibold","mb-0","text-muted"],[1,"text-color-primary","cursor-pointer",3,"ngClass","click"],["type","button",1,"btn","bg-btn-primary","rounded-pill","text-white","w-100","my-2",2,"color","white",3,"disabled","click"],[1,"fa",3,"ngClass"],[1,"invalid-feedback","d-block","ps-2"],[1,"text-center","my-2","text-xs","fw-normal","mb-0","text-muted"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submit()}),t.TgZ(1,"main",1)(2,"div",2),t._UZ(3,"span",3),t.TgZ(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7),t._UZ(8,"img",8),t.qZA()(),t.TgZ(9,"div",6)(10,"div",9)(11,"div",10)(12,"h6",11),t._uU(13," Welcome To "),t._UZ(14,"br"),t.TgZ(15,"div",7),t._UZ(16,"img",12),t.qZA()(),t._UZ(17,"hr",13),t.TgZ(18,"h4",14),t._uU(19),t.qZA(),t.YNc(20,A,23,11,"ng-container",15),t.YNc(21,U,18,9,"ng-container",15),t.qZA()()()()()()()()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(19),t.hij(" ",o.isLogin?"OTP Verification":""," "),t.xp6(1),t.Q6J("ngIf",!o.isLogin),t.xp6(1),t.Q6J("ngIf",o.isLogin))},dependencies:[m.mk,m.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.sg,s.u],styles:[".login-form-input[_ngcontent-%COMP%]{box-shadow:0 1px 6px 2px #00000029;padding-left:30px}.input-with-icon[_ngcontent-%COMP%]{position:relative}.input-with-icon[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);left:10px}.input-with-icon[_ngcontent-%COMP%]   .eye-icon[_ngcontent-%COMP%]{position:absolute;top:45%;transform:translateY(-50%);right:15px}.input-with-icon[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]{background-image:none}.input-outline[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:1px solid #d2d6da!important;padding:8px 8px 8px 40px;background:white!important}"]}),i})()},{path:"forgot-password",component:T}];let I=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[c.Bz.forChild(J),c.Bz]}),i})();var D=l(2271);let N=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[D.m,I]}),i})()}}]);